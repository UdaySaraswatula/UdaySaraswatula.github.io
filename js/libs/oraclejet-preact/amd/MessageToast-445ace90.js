define(["exports","preact/jsx-runtime",'module',"preact/hooks","./UNSAFE_Environment","./hooks/PRIVATE_useMessagesFocusManager","./hooks/UNSAFE_useBreakpointValues","./hooks/UNSAFE_useTranslationBundle","./PRIVATE_Message","./PRIVATE_MessageLayer","./UNSAFE_Flex","./UNSAFE_FocusTrap","./UNSAFE_LiveRegion","./utils/UNSAFE_arrayUtils","./utils/UNSAFE_classNames","./classNames-f11010a7","./MessageLayer-0bf829da","./FocusTrap-5a3a8c7d","./Flex-e3a46a36","./MessagesManager-92a31926","./MessageUtils-83d741c6"],function(e,t,s,n,o,a,r,i,l,c,u,d,g,m,f,h,v,p,x,R,y){"use strict";m.stringLiteralArray(["top","top-left","top-right","top-start","top-end","bottom","bottom-left","bottom-right","bottom-start","bottom-end"]);const b="_1utcwp5",j={entering:e=>({from:{transform:`translate(0, ${e.offsetHeight}px)`,opacity:1},to:{transform:"translate(0, 0)",opacity:1},end:{transform:"unset",opacity:1},options:{duration:250}}),exiting:{from:{opacity:1},to:{opacity:0},end:{opacity:0},options:{duration:250}}},E={opacity:0};e.MessageToast=function({data:e,detailRendererKey:s,iconRendererKey:c,renderers:u,onClose:d,offset:m,position:f}){var F,M,k,S;const T=n.useRef(new Map),A=n.useRef(null),_=n.useRef(null),N=n.useRef(null),[U,O]=n.useState(),[I,V]=n.useState(e.length>0),[L,P]=n.useState(!1),w=i.useTranslationBundle("@oracle/oraclejet-preact"),z=n.useRef(e.length),C=n.useRef(0);z.current=e.length,n.useImperativeHandle(N,()=>({focus:()=>{var t;return!!e.length&&(A.current=null!==(t=T.current.get(e[0].key))&&void 0!==t?t:null,P(!0),!0)},contains:t=>{var s,n;return!(!e.length||!t)&&(null!==(n=null===(s=_.current)||void 0===s?void 0:s.contains(t))&&void 0!==n&&n)}}),[e]);const{controller:B,handlers:D}=a.useMessageFocusManager(N,{onFocus:n.useCallback(()=>{O(w.message_navigationFromMessagesRegion())},[w]),onFocusLeave:n.useCallback(()=>{P(!1)},[])},{handleEscapeKey:!1}),W=n.useCallback((t,s,n)=>{var o;const a=null==n?void 0:n.contains(document.activeElement);if(0===z.current)return V(!1),P(!1),void(a&&setImmediate(()=>B.restorePriorFocus()));const r=s+1<e.length?s+1:s-1;if(r>-1&&a){const t=e[r].key;null===(o=T.current.get(t))||void 0===o||o.focus()}},[B,e]),K=n.useCallback(e=>t=>T.current.set(e,t),[]);n.useEffect(()=>{const t=C.current;if(C.current=e.length,e.length)return V(!0),e.length>t&&O(w.message_navigationToMessagesRegion()),void B.prioritize();O(t?w.messageToast_allMessagesClosed():"")},[B,e.length,w]);const H=r.useBreakpointValues({sm:"--oj-c-PRIVATE-DO-NOT-USE-message-toast-max-width-sm",md:"--oj-c-PRIVATE-DO-NOT-USE-message-toast-max-width-md",lg:"--oj-c-PRIVATE-DO-NOT-USE-message-toast-max-width-lg"}),$=r.useBreakpointValues({sm:{horizontal:"number"==typeof m?m:null!==(F=null==m?void 0:m.horizontal)&&void 0!==F?F:0,vertical:16+("number"==typeof m?m:null!==(M=null==m?void 0:m.horizontal)&&void 0!==M?M:0)},lg:{horizontal:"number"==typeof m?m:null!==(k=null==m?void 0:m.horizontal)&&void 0!==k?k:0,vertical:24+("number"==typeof m?m:null!==(S=null==m?void 0:m.horizontal)&&void 0!==S?S:0)}}),q=n.useMemo(()=>({close:w.close(),confirmation:w.confirmation(),error:w.error(),info:w.info(),warning:w.warn()}),[w]),G=h.classNames([b,"oj-c-colorscheme-dark","oj-color-invert"]);return I||0!==e.length?t.jsxs(o.EnvironmentProvider,Object.assign({environment:{colorScheme:"dark"}},{children:[t.jsx(v.MessageLayer,Object.assign({offset:$,position:f},{children:t.jsx("div",Object.assign({class:G,ref:_,tabIndex:-1},D,{children:t.jsx(p.FocusTrap,Object.assign({autoFocusRef:A,isDisabled:!L},{children:t.jsx(x.Flex,Object.assign({direction:"column",gap:"1x",align:"center",maxWidth:H},{children:t.jsx(R.MessagesManager,Object.assign({animationStates:j,initialAnimationStyles:E,data:e,onMessageWillRemove:W},{children:({index:e,item:n})=>t.jsx(l.Message,{messageRef:K(n.key),item:n,detailRenderer:y.getRendererWithoutIndex(n,s,u),iconRenderer:y.getRendererWithoutIndex(n,c,u),index:e,onClose:d,translations:q,variant:"toast"},n.key)}))}))}))}))})),t.jsx(g.LiveRegion,{children:U})]})):t.jsx(g.LiveRegion,{children:U})}});
//# sourceMappingURL=MessageToast-445ace90.js.map

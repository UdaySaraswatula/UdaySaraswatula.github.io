define(["preact/jsx-runtime","preact/hooks","@testing-library/preact","@testing-library/user-event","chai","../../testHelpers-d5c11a32","../../hooks/UNSAFE_useTabbableMode","../../List-24031444","../../UNSAFE_Flex","../../Flex-e3a46a36","preact","css!./../../PRIVATE_List.css","../../utils/UNSAFE_classNames","../../classNames-f11010a7","../../utils/UNSAFE_mergeProps","../../utils/UNSAFE_keys","../../LoadMoreCollection-d53c66bf","../../PRIVATE_Collection","../../Collection-0700cc46","../../hooks/UNSAFE_useViewportIntersect","../../PRIVATE_VirtualizedCollection","../../VirtualizedCollection-8523118a","../../utils/UNSAFE_arrayUtils","../../UNSAFE_FocusTrap","../../FocusTrap-5a3a8c7d","preact/compat","../../utils/PRIVATE_tabbableUtils","../../_curry1-f9717f1c","../../_curry2-c4648b65","../../_curry3-01167a7d","../../hooks/UNSAFE_useId","../../hooks/PRIVATE_useSelection","../../hooks/PRIVATE_useCurrentKey","../../hooks/PRIVATE_useCollectionFocusRing","../../hooks/PRIVATE_useTabbableModeSet","../../hooks/PRIVATE_useItemAction","../../utils/PRIVATE_collectionUtils","../../UNSAFE_Skeleton","../../Skeleton-65cc3876","../../tslib.es6-24bf3861","../../utils/UNSAFE_interpolations/dimensions","../../utils/UNSAFE_size","../../utils/UNSAFE_mergeInterpolations","../../_has-6f4fa2af","../../utils/UNSAFE_interpolations/borders","../../UNSAFE_Selector","../../index-c7f647a1","../../index-72f6069b","../../UNSAFE_Icon","../../Icon-7291b5d0","../../hooks/UNSAFE_useTooltip","../../UNSAFE_Floating","../../Floating-1e70bca1","../../index-66b69d43","../../hooks/UNSAFE_useUser","../../UNSAFE_Environment","../../UNSAFE_Layer","../../utils/PRIVATE_floatingUtils","../../utils/PRIVATE_refUtils","../../hooks/UNSAFE_useOutsideClick","../../hooks/UNSAFE_useHover","../../hooks/UNSAFE_useToggle","../../hooks/UNSAFE_useFocus","../../hooks/UNSAFE_useTouch","../../hooks/UNSAFE_useAnimation","../../useAnimation-19a01c68","../../hooks/UNSAFE_useTheme","../../hooks/UNSAFE_useTranslationBundle","../../utils/UNSAFE_interpolations/boxalignment","../../keys-6231193b","../../utils/UNSAFE_interpolations/flexbox","../../flexbox-b6c222f9","../../utils/UNSAFE_interpolations/flexitem","../../flexitem-1405ebe5"],function(e,t,o,a,s,i,n,l,r,c,d,u,b,g,p,A,x,E,h,_,m,S,f,F,U,N,T,I,k,y,w,j,R,v,P,V,O,q,C,M,L,z,B,D,K,H,G,J,Q,W,X,Y,Z,$,ee,te,oe,ae,se,ie,ne,le,re,ce,de,ue,be,ge,pe,Ae,xe,Ee,he,_e){"use strict";function me(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Se=me(a);function fe({allowTabbableMode:o,data:a,loadingIndicator:s,role:i}){const n=t.useRef(null),[r,d]=t.useState(void 0),[u,b]=t.useState(a?{offset:0,data:a.slice(0,25),totalSize:a.length,sizePrecision:"exact"}:null);return e.jsx("div",Object.assign({style:"height: calc(10 * var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-5x));overflow: auto",ref:n},{children:e.jsx(l.List,Object.assign({accessibleSummary:"Basic list",allowTabbableMode:o,currentKey:r,data:u,loadingIndicator:s,onCurrentKeyChange:e=>d(e.value),onLoadRange:()=>{},role:i,viewportConfig:{scroller:()=>n.current}},{children:t=>e.jsxs(c.Flex,{children:[t.selector&&t.selector(),e.jsx(Ue,{"data-testid":"input-"+t.data.id}),e.jsx("div",Object.assign({className:"item",style:{height:"calc(var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-5x))",padding:"var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-3x)"}},{children:t.data.name}))]})}))}))}function Fe(e,t){const o=[];for(let a=0;a<e;a++)t?o.push({id:a,name:"Employee "+a}):o.push({id:"i"+a,name:"Employee "+a});return o}describe("Test List component",()=>{beforeEach(()=>{if(!window.IntersectionObserver){const e=jest.fn();e.mockReturnValue({observe:()=>null,unobserve:()=>null,disconnect:()=>null}),Object.defineProperty(global,"IntersectionObserver",{writable:!0,configurable:!0,value:e})}}),it("renders with custom loader",()=>{const t=e.jsx("div",Object.assign({"data-testid":"load-more-component"},{children:"Loading"})),{getAllByTestId:a,queryByTestId:i,rerender:n}=o.render(e.jsx(fe,{data:null}));s.expect(i("load-more-component")).to.be.null,n(e.jsx(fe,{data:null,loadingIndicator:t})),s.expect(a("load-more-component").length).eq(1)}),it("renders with default roles",async()=>{const t=Fe(100).map(e=>({data:e,metadata:{key:e.id}})),a=o.render(e.jsx(fe,{data:t})),n=await i.getRoot(a);s.expect(n.getAttribute("aria-rowcount")).eq("100");const l=await i.getItems(a);s.expect(l.length).eq(25);const r=await i.getContents(a);s.expect(r.length).eq(25)}),it("renders with listbox rows",async()=>{const t=Fe(100).map(e=>({data:e,metadata:{key:e.id}})),a=o.render(e.jsx(fe,{data:t,role:"listbox"})),n=await i.getRoot(a,"listbox");s.expect(n.getAttribute("aria-rowcount")).eq("100");const l=await i.getItems(a,"presentation");s.expect(l.length).eq(25);const r=await i.getContents(a,"option");s.expect(r.length).eq(25)}),it("renders with treegrid rows",async()=>{const t=Fe(100).map(e=>({data:e,metadata:{key:e.id}})),a=o.render(e.jsx(fe,{data:t,role:"treegrid"})),n=await i.getRoot(a,"treegrid");s.expect(n.getAttribute("aria-rowcount")).eq("100");const l=await i.getItems(a,"row");s.expect(l.length).eq(25);const r=await i.getContents(a,"gridcell");s.expect(r.length).eq(25)}),it("allows toggling off F2 mode",async()=>{const t=Fe(100).map(e=>({data:e,metadata:{key:e.id}})),{getByTestId:a,rerender:i}=o.render(e.jsx(fe,{data:t})),n=a("input-i0");s.expect(n.getAttribute("tabindex")).equals("-1"),Se.default.click(n),i(e.jsx(fe,{data:t})),s.expect(n.getAttribute("tabindex")).equals("0"),i(e.jsx(fe,{allowTabbableMode:!1,data:t})),Se.default.click(n),s.expect(n.getAttribute("tabindex")).equals("-1")})});const Ue=t=>{const{tabbableModeProps:o}=n.useTabbableMode();return e.jsx("input",Object.assign({tabIndex:o.tabIndex},t))}});
//# sourceMappingURL=List.spec.js.map

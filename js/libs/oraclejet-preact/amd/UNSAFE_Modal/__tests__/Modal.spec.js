define(["preact/jsx-runtime","preact","preact/hooks","@testing-library/preact","chai","../../UNSAFE_Layer","../../Modal-2ffa504c","preact/compat","../../useModal-b9882031","../../UNSAFE_FocusTrap","../../FocusTrap-5a3a8c7d","../../utils/UNSAFE_classNames","../../classNames-f11010a7","css!./../../UNSAFE_Modal.css","../../utils/PRIVATE_tabbableUtils","../../_curry1-f9717f1c","../../_curry2-c4648b65","../../_curry3-01167a7d"],function(e,t,s,n,c,i,a,o,r,u,l,d,x,m,p,f,b,j){"use strict";const g=({submitButtonRef:s})=>e.jsxs(t.Fragment,{children:[e.jsx("input",{id:"inside_input"}),e.jsx("button",Object.assign({id:"inside_cancel"},{children:"Cancel"})),e.jsx("button",Object.assign({id:"inside_submit",ref:s},{children:"Submit"}))]}),y=({autoFocusTest:t=!1,isOpen:n=!0,restoreFocusTest:c=!1})=>{const o=s.useRef(null),r=s.useRef(null);let u,l;return t&&(u=o),c&&(l=r),e.jsxs(i.LayerManager,{children:[e.jsx("button",{children:"Preceding Button"}),e.jsx(a.Modal,Object.assign({autoFocusRef:u,isOpen:n,restoreFocusRef:l},{children:e.jsx(g,{submitButtonRef:o})})),e.jsx("button",Object.assign({ref:r},{children:"Following Button"}))]})};describe("Test Modal component",()=>{beforeEach(()=>{Object.defineProperty(HTMLElement.prototype,"offsetParent",{get(){return this.parentNode}})}),it("renders and sets default focus on first tabbable item",async()=>{const{getByRole:t}=n.render(e.jsx(y,{})),s=t("textbox");await n.waitFor(()=>{c.expect(document.activeElement).equals(s)})}),it("renders and sets initial focus to specified element",async()=>{const{getByText:t}=n.render(e.jsx(y,{autoFocusTest:!0})),s=t("Submit");await n.waitFor(()=>{c.expect(document.activeElement).equals(s)})}),it("unmounts and resets focus to original element",async()=>{const{getByRole:t,getByText:s,rerender:i}=n.render(e.jsx(y,{isOpen:!1})),a=s("Preceding Button");a.focus(),c.expect(document.activeElement).equals(a),i(e.jsx(y,{isOpen:!0}));const o=t("textbox");c.expect(document.activeElement).equals(o),i(e.jsx(y,{isOpen:!1})),await n.waitFor(()=>{c.expect(document.activeElement).equals(a)})}),it("unmounts and resets focus to specified element",async()=>{const{getByRole:t,getByText:s,rerender:i}=n.render(e.jsx(y,{isOpen:!1})),a=s("Preceding Button"),o=s("Following Button");a.focus(),c.expect(document.activeElement).equals(a),i(e.jsx(y,{isOpen:!0,restoreFocusTest:!0}));const r=t("textbox");c.expect(document.activeElement).equals(r),i(e.jsx(y,{isOpen:!1})),await n.waitFor(()=>{c.expect(document.activeElement).equals(o)})})})});
//# sourceMappingURL=Modal.spec.js.map
